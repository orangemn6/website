<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Jacob Goldstein">
<meta name="description" content="A while ago, I have discussed how to create multiboot USB drives with Ventoy application. Today, I will see how to create persistent bootable USB using Ventoy in Linux. As you may already know, a regular bootable medium allows us to test the Linux distributions without having to install them on the hard drive. When you are on a Live OS, you can do all sort of things, such as installing applications, downloading files, playing media, creating files and folders, customizing it as per your liking and a lot more." />
<meta name="keywords" content="Jacob Goldstein,orangemn6,linux,jacobgoldstein,rices,ricing,rice, Linux" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="#252627" />
<link rel="canonical" href="https://jacobgoldstein.tk/posts/ventoy-persistence/" />


<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.4.0/jquery.fancybox.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.4.0/jquery.fancybox.min.css" />


    <title>
        
            Ventoy Persistence :: Jacob Goldstein&#39;s Website 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://jacobgoldstein.tk/main.393856bf2c430bb6c01d7af07c6fe966e7cce8073435cfbbc46e590bab7405ef.css">




    <link rel="apple-touch-icon" sizes="180x180" href="https://jacobgoldstein.tk/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://jacobgoldstein.tk/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://jacobgoldstein.tk/favicon-16x16.png">
    <link rel="manifest" href="https://jacobgoldstein.tk/site.webmanifest">
    <link rel="mask-icon" href="https://jacobgoldstein.tk/safari-pinned-tab.svg" color="#252627">
    <link rel="shortcut icon" href="https://jacobgoldstein.tk/favicon.ico">
    <meta name="msapplication-TileColor" content="#252627">
    <meta name="theme-color" content="#252627">



<meta itemprop="name" content="Ventoy Persistence">
<meta itemprop="description" content="A while ago, I have discussed how to create multiboot USB drives with Ventoy application. Today, I will see how to create persistent bootable USB using Ventoy in Linux. As you may already know, a regular bootable medium allows us to test the Linux distributions without having to install them on the hard drive. When you are on a Live OS, you can do all sort of things, such as installing applications, downloading files, playing media, creating files and folders, customizing it as per your liking and a lot more.">
<meta itemprop="datePublished" content="2020-10-25T19:00:00+00:00" />
<meta itemprop="dateModified" content="2020-10-25T19:00:00+00:00" />
<meta itemprop="wordCount" content="1141">
<meta itemprop="image" content="https://jacobgoldstein.tk/"/>



<meta itemprop="keywords" content="Linux," />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://jacobgoldstein.tk/"/>

<meta name="twitter:title" content="Ventoy Persistence"/>
<meta name="twitter:description" content="A while ago, I have discussed how to create multiboot USB drives with Ventoy application. Today, I will see how to create persistent bootable USB using Ventoy in Linux. As you may already know, a regular bootable medium allows us to test the Linux distributions without having to install them on the hard drive. When you are on a Live OS, you can do all sort of things, such as installing applications, downloading files, playing media, creating files and folders, customizing it as per your liking and a lot more."/>



    <meta property="og:title" content="Ventoy Persistence" />
<meta property="og:description" content="A while ago, I have discussed how to create multiboot USB drives with Ventoy application. Today, I will see how to create persistent bootable USB using Ventoy in Linux. As you may already know, a regular bootable medium allows us to test the Linux distributions without having to install them on the hard drive. When you are on a Live OS, you can do all sort of things, such as installing applications, downloading files, playing media, creating files and folders, customizing it as per your liking and a lot more." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jacobgoldstein.tk/posts/ventoy-persistence/" />
<meta property="og:image" content="https://jacobgoldstein.tk/"/>
<meta property="article:published_time" content="2020-10-25T19:00:00+00:00" />
<meta property="article:modified_time" content="2020-10-25T19:00:00+00:00" />




    <meta property="article:section" content="Linux" />



    <meta property="article:published_time" content="2020-10-25 19:00:00 &#43;0000 UTC" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://jacobgoldstein.tk/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://jacobgoldstein.tk/about/">About</a></li><li><a href="https://jacobgoldstein.tk/posts/">Posts</a></li><li><a href="https://jacobgoldstein.tk/rices/">Rices</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://jacobgoldstein.tk/posts/ventoy-persistence/">Ventoy Persistence</a></h2>

            

            

            <div class="post-content">
                <p>A while ago, I have discussed how to <a href="https://www.jacobgoldstein.tk/posts/2020/10/ventoy-multiboot-usb/"><strong>create multiboot USB drives
with
Ventoy</strong></a>
application. Today, I will see how to create persistent bootable USB
using Ventoy in Linux. As you may already know, a regular bootable
medium allows us to test the Linux distributions without having to
install them on the hard drive. When you are on a Live OS, you can do
all sort of things, such as installing applications, downloading files,
playing media, creating files and folders, customizing it as per your
liking and a lot more. However once you reboot the system, all of the
said changes will be lost. Because, you are working on a live OS. That&rsquo;s
how a live bootable medium works! What if you want to make all changes
remain intact even after rebooted the system? This is where persistent
bootable USB drives comes in help.</p>
<p>A bootable USB drive with persistent storage support will enable you to
install programs, customize the OS and store data permanently. Nothing
will be lost after reboot or shutdown. All changes will remain intact
and you can use a USB bootable drive as a portable Linux system. Ventoy
currently allows us to configure persistence support for Ubuntu, MX
Linux, Linux Mint, Elementary OS and Zorin OS.</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="create-persistent-bootable-usb-using-ventoy-in-linux">Create Persistent Bootable USB Using Ventoy In Linux</h2>
<p>I assume you already have created a live bootable USB with Ventoy as
described in the link attached in the first paragraph.</p>
<p>Open your Terminal and navigate to the folder where you have extracted
the Ventoy script.</p>
<p>I have extracted it in a folder named “ventoy” in my $HOME directory. Cd
into the Ventoy directory:</p>
<pre><code>$ cd ventoy
</code></pre>
<p>This folder will contain the following contents:</p>
<pre><code>boot CreatePersistentImg.sh log.txt tool ventoy Ventoy2Disk.sh
</code></pre>
<p>Now, run the &ldquo;CreatePersistentImg.sh&rdquo; script to create a backend image
file named <strong>&ldquo;persistence.img&rdquo;</strong> with <strong>1 GB</strong> in size, with <strong>EXT4</strong>
filesystem and with label <strong>casper-rw</strong>.</p>
<pre><code>$ sudo sh CreatePersistentImg.sh
</code></pre>
<p>Or,</p>
<pre><code>$ sudo ./CreatePersistentImg.sh
</code></pre>
<p>You can also create a specific size image using <strong>-s</strong> flag like below.
The following command will create image file with <strong>2 GB</strong> in size.</p>
<pre><code>$ sudo sh CreatePersistentImg.sh -s 2048
</code></pre>
<p>Or,</p>
<pre><code>$ sudo ./CreatePersistentImg.sh -s 2048
</code></pre>
<p>Here, <strong>-s 2048</strong> indicates the size of the image file in <strong>MB</strong>. You
can increase or decrease the size as you wish. You can also choose
different filesystem, for example <strong>xfs</strong>, like below:</p>
<pre><code>$ sudo sh CreatePersistentImg.sh -s 2048 -t xfs
</code></pre>
<p>Like I already said, the above commands will create an image called
&ldquo;persistence.img&rdquo; with label casper-rw. Different distributions use
different Labels by default, for example Ubuntu use casper-rw and MX
Linux use MX-Persist.</p>
<p>You can use <strong>-l</strong> flag to set the label:</p>
<pre><code>$ sudo sh CreatePersistentImg.sh -l MX-Persist
</code></pre>
<p>For the purpose of this guide, I am going to create an image file of
size 4 GB in EXT4 filesystem, with label casper-rw using command:</p>
<pre><code>$ sudo ./CreatePersistentImg.sh -s 4096
</code></pre>
<p><strong>Sample output:</strong></p>
<pre><code>4096+0 records in
4096+0 records out
4294967296 bytes (4.3 GB, 4.0 GiB) copied, 55.1246 s, 77.9 MB/s
mke2fs 1.45.5 (07-Jan-2020)
Creating filesystem with 1048576 4k blocks and 262144 inodes
Filesystem UUID: bdd96096-eab5-4806-a206-909d94e96b1e
Superblock backups stored on blocks: 
    32768, 98304, 163840, 229376, 294912, 819200, 884736

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (16384 blocks): done
Writing superblocks and filesystem accounting information: done
</code></pre>
<p><a href="https://ostechnix.com/wp-content/uploads/2020/06/Create-Persistent-Bootable-USB-Using-Ventoy-In-Linux.png"><!-- raw HTML omitted --><!-- raw HTML omitted --></a></p>
<p>This command will create a file named &ldquo;persistence.img&rdquo; inside ventoy
folder.</p>
<p>Verify if the image file is created or not using &ldquo;ls&rdquo; command:</p>
<pre><code>$ ls -lh
</code></pre>
<p><strong>Sample output:</strong></p>
<pre><code>total 4.1G
drwxr-xr-x 2 sk   sk   4.0K May 30 16:51 boot
-rwxr--r-- 1 sk   sk   1.5K May 30 16:51 CreatePersistentImg.sh
-rw-r--r-- 1 root root  518 Jun  8 15:33 log.txt
-rw-r--r-- 1 root root 4.0G Jun  8 17:12 persistence.img
drwxrwxrwx 2 sk   sk   4.0K Jun  8 15:28 tool
drwxr-xr-x 2 sk   sk   4.0K May 30 16:51 ventoy
-rwxr--r-- 1 sk   sk   1.2K May 30 16:51 Ventoy2Disk.sh
</code></pre>
<p>Now copy the newly created persistence.img file to your Ventoy bootable
USB drive.</p>
<p>Next create a folder called <strong>&ldquo;ventoy&rdquo;</strong> in your bootable USB drive. And
then create <strong>&ldquo;ventoy.json&rdquo;</strong> file inside the ventoy folder.</p>
<p>Open ventoy.json file in any text editor and add the menu entries for
your ISOs in the ventoy.json file.</p>
<p>I am going to configure persistence USB bootable support for Ubuntu
20.04 ISO, so I have added the following lines:</p>
<pre><code>{
    &quot;persistence&quot; : [
        {
            &quot;image&quot;: &quot;/ubuntu-20.04-desktop-amd64.iso&quot;,
            &quot;backend&quot;: &quot;/persistence.img&quot;
        }
    ]
}
</code></pre>
<p><a href="https://ostechnix.com/wp-content/uploads/2020/06/Configure-persistence-USB-bootable-support-for-Ubuntu-with-ventoy.png"><!-- raw HTML omitted --><!-- raw HTML omitted --></a></p>
<p>Make sure the ISO and persistence.img files are stored in the <!-- raw HTML omitted --><strong>root of the USB drive</strong><!-- raw HTML omitted -->. Also make sure
the <!-- raw HTML omitted --><strong>filenames and syntax are
correct</strong><!-- raw HTML omitted -->. And more importantly, the ISO <!-- raw HTML omitted --><strong>filenames should not contain any spaces or
special characters</strong><!-- raw HTML omitted -->. If you missed a comma or a curly bracket or
double quotes, the persistence support will not work.</p>
<p>After adding the above lines, save and close the file.</p>
<p>Now boot your system with the newly created USB bootable drive.</p>
<p>Choose Ubuntu 20.04 ISO for which you have added persistence support
from the boot menu:</p>
<p><a href="https://ostechnix.com/wp-content/uploads/2020/06/Ventoy-boot-menu.png"><!-- raw HTML omitted --><!-- raw HTML omitted --></a></p>
<p>You will then see another menu that you lets you to boot with or without
persistence as shown in the following screenshot:</p>
<p><a href="https://ostechnix.com/wp-content/uploads/2020/06/Create-Persistent-Bootable-USB-Using-Ventoy.png"><!-- raw HTML omitted --><!-- raw HTML omitted --></a></p>
<hr>
<hr>
<h3 id="create-multiboot-persistent-usb-with-ventoy">Create multiboot persistent USB with Ventoy</h3>
<p>In the above example, I have created only one persistence bootable USB
with Ubuntu 20.04 LTS. Ventoy allows you to create multiboot persistent
USB as well.</p>
<p>To enable persistent support for multiple ISOs, we need to change the
ventoy.json file to match with the exact path of ISO file and
persistence.img.</p>
<p>For example, I am going to configure persistence support for Ubuntu
18.04 and Ubuntu 20.04. So, I added the following lines in my
ventoy.json file:</p>
<pre><code>{
    &quot;persistence&quot; : [
        {
            &quot;image&quot;: &quot;/ubuntu-20.04-desktop-amd64.iso&quot;,
            &quot;backend&quot;: &quot;/persistence.img&quot;
        },
        {
            &quot;image&quot;: &quot;/ubuntu-18.04.3-desktop-amd64.iso&quot;,
            &quot;backend&quot;: &quot;/persistence.img&quot;
        }
    ]
}
</code></pre>
<p><a href="https://ostechnix.com/wp-content/uploads/2020/06/Configure-multiboot-persistent-USB-with-Ventoy.png"><!-- raw HTML omitted --><!-- raw HTML omitted --></a></p>
<p>You can use the same backend image (persistence.img) between multiple
ISOs as long as it can be supported by the distros. Again, please make
sure you have specified the exact path and filename. If there are any
missing brackets, commas, colon, the persistence support will not work.</p>
<p>Save and close the file.</p>
<p>Now we have enabled persistence boot for both Ubuntu 18.04 and Ubuntu
20.04 ISOs. Boot your system with Ventoy and select the OS you want to
load:</p>
<p><a href="https://ostechnix.com/wp-content/uploads/2020/06/Ventoy-multiboot-menu.png"><!-- raw HTML omitted --><!-- raw HTML omitted --></a></p>
<p>And finally boot into the OS with persistence support:</p>
<p><a href="https://ostechnix.com/wp-content/uploads/2020/06/Create-multiboot-persistent-USB-with-Ventoy.png"><!-- raw HTML omitted --><!-- raw HTML omitted --></a></p>
<h4 id="save-files-in-custom-location">Save files in custom location</h4>
<p>In our above examples, we have stored the ISOs and persistence.img files
in the root of the USB drive. If you have stored the files in a separate
directories for the sake of easy navigation, you must mention the exact
path in the ventoy.json file.</p>
<p>For instance, I am going to save the ISOs in a directory named <strong>&ldquo;ISO&rdquo;</strong>
and persistence.img files in a directory named <strong>&ldquo;persistence&rdquo;</strong>. Here
is my Ventoy file contents:</p>
<pre><code>{
    &quot;persistence&quot; : [
        {
            &quot;image&quot;: &quot;/ISO/ubuntu-20.04-desktop-amd64.iso&quot;,
            &quot;backend&quot;: &quot;/persistence/persistence.img&quot;
        },
        {
            &quot;image&quot;: &quot;/ISO/ubuntu-18.04.3-desktop-amd64.iso&quot;,
            &quot;backend&quot;: &quot;/persistence/persistence.img&quot;
        }
    ]
}
</code></pre>
<p>For more details, refer Ventoy help:</p>
<pre><code>$ sh CreatePersistentImg.sh --help
</code></pre>
<p>Hope this helps.</p>
<p><strong>Resource:</strong></p>
<ul>
<li><a href="https://www.ventoy.net/en/plugin_persistence.html"><strong>Ventoy
documentation</strong></a></li>
</ul>
<p><strong>Thanks for stopping by!</strong></p>

            </div>
            <div class="article-container"></div>
                    <div id="dark-mode">
            <script src="https://utteranc.es/client.js"
                repo="orangemn6/website"
                issue-term="pathname"
                theme="photon-dark"
                crossorigin="anonymous"
                async>
            </script>
        </div>

            </div>
        </article>

        <hr />

        <div class="post-info">
            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://jacobgoldstein.tk/tags/linux/">Linux</a></span>
        
    </p>

            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>

        <span class="tag"><a href="https://jacobgoldstein.tk/categories/linux/">Linux</a></span>
        
    </p>

  		</div>
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2020</span>
            
                <span><a href="https://jacobgoldstein.tk/">Jacob Goldstein</a></span>
            
            
                <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            <span><a href="https://jacobgoldstein.tk/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/orangemn6">Jacob Goldstein</a></span>
          </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="https://jacobgoldstein.tk/bundle.min.dc716e9092c9820b77f96da294d0120aeeb189b5bcea9752309ebea27fd53bbe6b13cffb2aca8ecf32525647ceb7001f76091de4199ac5a3caa432c070247f5b.js" crossorigin="anonymous"></script>



    </body>
</html>
